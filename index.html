
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Alumni Spaces API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Introduction">Authentication</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#alumni-fund-vault" class="toc-h1 toc-link" data-title="Alumni.Fund Vault">Alumni.Fund Vault</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#entities" class="toc-h2 toc-link" data-title="Alumni.Fund Vault">Entities</a>
                  </li>
                  <li>
                    <a href="#update-timestamps" class="toc-h2 toc-link" data-title="Alumni.Fund Vault">Update Timestamps</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#people" class="toc-h1 toc-link" data-title="People">People</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-a-person" class="toc-h2 toc-link" data-title="People">Get a Person</a>
                  </li>
                  <li>
                    <a href="#get-all-people" class="toc-h2 toc-link" data-title="People">Get All People</a>
                  </li>
                  <li>
                    <a href="#create-a-person" class="toc-h2 toc-link" data-title="People">Create a Person</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#transactions" class="toc-h1 toc-link" data-title="Transactions">Transactions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#what-a-transaction-is-not" class="toc-h2 toc-link" data-title="Transactions">What a transaction is not</a>
                  </li>
                  <li>
                    <a href="#get-a-transaction" class="toc-h2 toc-link" data-title="Transactions">Get a Transaction</a>
                  </li>
                  <li>
                    <a href="#create-a-transaction" class="toc-h2 toc-link" data-title="Transactions">Create a Transaction</a>
                  </li>
                  <li>
                    <a href="#update-a-transaction" class="toc-h2 toc-link" data-title="Transactions">Update a Transaction</a>
                  </li>
                  <li>
                    <a href="#querying-transactions" class="toc-h2 toc-link" data-title="Transactions">Querying Transactions</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='mailto:andrew@alumnispaces.com'>Email Andrew for help</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Alumni Spaces maintains two public APIs:</p>

<ul>
<li><strong>contentAPI</strong> for accessing content created by groups</li>
<li><strong>vaultAPI</strong> for accessing transaction data from Alumni.Fund.<br></li>
</ul>

<p>At the moment, only vaultAPI is documented.  If you need access to contentAPI, please let us know.</p>

<p>The production URL for API access is <code>https://vault.alumnispaces.com</code></p>

<p>For testing purposes, you may also use <code>https://vault-dev.alumnispaces.com</code></p>
<h2 id='authentication'>Authentication</h2>
<p>To access any Alumni.Fund data, you&#39;ll first need to get two things from our team.</p>

<ul>
<li>HTTP Basic authentication username and password</li>
<li>A valid API key - it is an alphanumeric string that determines your data access and &quot;verb&quot; permissions. We use this key to determine which institutions you have data right to and if you are allowed to GET, POST, PUT or DELETE. This API key is passed to our API using a custom header: <code>x-alumnispaces-key</code></li>
</ul>

<p>All requests require the presence of both authentication methods.</p>

<p>Any request that does not contain both authentication methods will be rejected.</p>

<aside class="notice">
API Keys are limited by scope and verb permissions. Your key will be limited in scope to the records pertinent to your institution and, in most cases, will be limited to GET requests only, even though DELETE and PUT requests are documented here. If you feel that you need write access, please discuss with our team.
</aside>
<h1 id='alumni-fund-vault'>Alumni.Fund Vault</h1><h3 id='entities'>Entities</h3>
<ul>
<li>Alumni.Fund&#39;s Vault contains two entities: <code>Person</code> and <code>Transaction</code>.</li>
<li>In the plural, they are referred to as <code>People</code> and <code>Transactions</code>.</li>
<li>As you might imagine, a <code>Person</code> is the instigator of a <code>Transaction</code>.</li>
<li>Each <code>Person</code> has a unique ID which is the only part of their identity that is stored with the <code>Transaction</code> record.<br></li>
</ul>

<p>At the moment, we do not de-duplicate or combine <code>Person</code> records, so <code>Tyrion Lannister</code> might have 5 different <code>Person</code> records to match the 5 transactions he&#39;s conducted. This is anticipated to change in the future. <code>Transactions</code> on the other hand, will always represent a single instance where funds are processed.</p>
<h3 id='update-timestamps'>Update Timestamps</h3>
<blockquote>
<p>Example of <code>_updated</code> timestamps for object properties</p>
</blockquote>
<pre class="highlight plaintext"><code>"emails": [
  {
    "label": "work",
    "_updated": "2017-08-10T21:58:04.773Z",
    "address": "tlannister@meereen.gov"
  },
  {
    "label": "personal",
    "_updated": "2016-07-10T21:58:16.403Z",
    "address": "tyrionthetall@wmail.com"
  }
]
</code></pre>
<p>When a record is created for either a <code>Person</code> or a <code>Transaction</code>, we add a <code>_created</code> property to the record which contains as ISO8601 timestamp. If that record is ever updated, we add an <code>_updated</code> property with that timestamp. Almost every record will have an <code>_updated</code> value because it usually takes a few seconds for our code to communicate with the payment processing system or our own internal APIs.</p>

<blockquote>
<p>Example of <code>_updated</code> timestamps for non-object</p>
</blockquote>
<pre class="highlight plaintext"><code>"_contentID_updated": "2017-04-07T20:02:13.044Z",
"_asSiteID_updated": "2017-04-07T20:02:13.044Z",
"_status_updated": "2017-04-07T20:02:13.044Z",
"_taxed_updated": "2017-04-07T20:02:13.044Z",
</code></pre>
<p>Thinking ahead, it is reasonable to assume that we&#39;ll be updating <code>Person</code> records regularly as the Person perform more transactions, our data is integrated into more systems or we add additional data management features. So, we also maintain a per-property <code>_updated</code> value.</p>

<p>When a property is updated, you&#39;ll see a timestamp of when that update occurred. If the property is a nested object (like <code>emails</code>), we&#39;ll add the timestamp within that object. If the updated property it is not a nested object, we&#39;ll add the timestamp at the root of the record object using an underscore prefix and the property name. For example: <code>_status_updated:</code> or <code>_disbursement_updated:</code></p>
<h1 id='people'>People</h1>
<blockquote>
<p>Example Person Record</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "_id": "598cd8a53fw352252b6ffqc",
  "_created": "2017-08-10T22:05:25.561Z",
  "_updated": "2017-08-10T22:05:35.253Z",
  "contentIDs": [
    "westeros_20_135",
    "westeros_35_123"
  ],
  "asSiteIDs": [
    "westeros_20",
    "westeros_35"
  ],
  "name": {
    "first": "Tyrion",
    "last": "Lannister",
    "_updated": "2015-09-01T17:28:23.781Z"
  },
  "addresses": [
    {
      "label": "Dorne Vacation Home",
      "company": "Lannister Family",
      "validStart": "05.08.1982",
      "validEnd": "11.11.2009",
      "addr1": "412 S. Sandsnake Dr.",
      "addr2": "Penthouse Suite",
      "city": "Sunspear",
      "region": "Dorne",
      "country": "Dorne",
      "postal": "1"
    }
  ],
  "emails": [
    {
      "label": "work",
      "_updated": "2017-08-10T21:58:04.773Z",
      "address": "tlannister@meereen.gov"
    },
    {
      "label": "personal",
      "_updated": "2016-07-10T21:58:16.403Z",
      "address": "tyrionthetall@wmail.com"
    }
  ],
  "organizations": [
    {
      "name": "The Iron Throne",
      "orgType": "Government Body",
      "startDate": "01.01.1995",
      "endDate": "01.01.1997",
      "title": "Hand of the King",
      "prevTitles": [ "Brother-in-law", "Nuncle" ]
    }
  ],
  "externalIDs" : [
    {
      "_updated": "2017-08-10T22:05:25.561Z",
      "key": "braintree",
      "value": null,
      "_id": "5953432579ger6b624g3d"
    },
    {
      "_updated": "2017-07-11T12:35:15.561Z",
      "key": "yourExternalDB",
      "value": "lannister_t",
      "_id": "09998122j"
    }
  ],
  "gender": "male",
  "birthday": "01.01.1971",
  "Twitter": {
    "username": "the_pImp"
  },
  "phones": [
    {
      "label": "pager",
      "number": "1234"
    },
    {
      "label": "mobile",
      "number": "5678"
    }
  ],
  "urls": [
    {
      "label": "Wikipedia",
      "value": "https://en.wikipedia.org/wiki/Tyrion_Lannister"
    }
  ]
}
</code></pre>
<p>A <code>person</code> is a core object in the Alumni.Fund Vault API. A person is exactly that: a warm-blooded human for home we have some amount of data. A person is created when one of the following things occurs:</p>

<ul>
<li>They perform a transaction through our system, either a purchase or donation</li>
<li>(future) They RSVP or check in at an event managed by the Alumni Spaces platform</li>
<li>(future) A member of a local group or national alumni association manually enters some information about this person</li>
</ul>

<p><img src="https://files.readme.io/wOOjyUC9T3a0AWqZyJtO_people.jpeg" alt="A person" /></p>

<p>People have the following attributes (<strong>bold</strong> indicates top level object element)</p>

<table><thead>
<tr>
<th>Response Parameter</th>
<th>Definition</th>
<th>Type</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td><strong>_id</strong></td>
<td>Unique identifier for this person</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><strong>_created</strong></td>
<td>Date this Person&#39;s record was first created</td>
<td>string as ISO8601 Date</td>
<td></td>
</tr>
<tr>
<td><strong>_updated</strong></td>
<td>Date this Person&#39;s record was last updated</td>
<td>string as ISO8601 Date</td>
<td></td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>Object containing Person&#39;s name</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>name.first</td>
<td>Person&#39;s first name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>name.last</td>
<td>Person&#39;s last name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><strong>addresses</strong></td>
<td>Array of objects containing address records</td>
<td>Array</td>
<td>object</td>
</tr>
<tr>
<td>address.label</td>
<td>Text label for this address record</td>
<td>string</td>
<td>&quot;Home&quot;, &quot;Office&quot;,&quot;Summer home&quot;</td>
</tr>
<tr>
<td>address.company</td>
<td>Company name for business address</td>
<td>string</td>
<td>&quot;ACME, Inc&quot;</td>
</tr>
<tr>
<td>address.validStart</td>
<td>Beginning of date range for which this is/was a valid address</td>
<td>string as ISO8601 Date</td>
<td></td>
</tr>
<tr>
<td>address.validEnd</td>
<td>End of date range for which this is/was a valid address</td>
<td>string as ISO8601 Date</td>
<td></td>
</tr>
<tr>
<td>address.addr1</td>
<td>First line of address</td>
<td>string</td>
<td>68 Jay St</td>
</tr>
<tr>
<td>address.addr2</td>
<td>Second line of address</td>
<td>string</td>
<td>Suite 503</td>
</tr>
<tr>
<td>address.city</td>
<td>Town/City name</td>
<td>string</td>
<td>Brooklyn</td>
</tr>
<tr>
<td>address.region</td>
<td>Region/State name</td>
<td>string</td>
<td>New York</td>
</tr>
<tr>
<td>address.country</td>
<td>Country name</td>
<td>string as ISO 3166-1 Alpha-2 abbreviation</td>
<td>US</td>
</tr>
<tr>
<td>address.postal</td>
<td>postal/zipcode</td>
<td>string</td>
<td>11201</td>
</tr>
<tr>
<td><strong>facebook</strong></td>
<td>Object containing identifying info for facebook</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>facebook.identityToken</td>
<td>Token saved if user has authenticated with the Alumni Spaces Facebook App.  Internal use only, not returnable.</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>facebook.displayName</td>
<td>Name user has chosen to display on Facebook</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>facebook.ID</td>
<td>Unique numerical id for Facebook profile</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td><strong>twitter</strong></td>
<td>Object containing Twitter profile data</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>twitter.username</td>
<td>Twitter id without @ symbol</td>
<td>string</td>
<td>acafourek</td>
</tr>
<tr>
<td><strong>linkedin</strong></td>
<td>Object containing LinkedIn profile data</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>linkedin.username</td>
<td>Unique username on LinkedIn</td>
<td>string</td>
<td>andrew.cafourek</td>
</tr>
<tr>
<td><strong>emails</strong></td>
<td>Array of objects containing email data</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td>email.label</td>
<td>Text label for email field</td>
<td>string</td>
<td>Personal</td>
</tr>
<tr>
<td>email.address</td>
<td>Email address</td>
<td>string</td>
<td>andrew@gmail.com</td>
</tr>
<tr>
<td><strong>phones</strong></td>
<td>Array of objects containing phone numbers</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td>phone.label</td>
<td>Text label for phone field</td>
<td>string</td>
<td>Cell</td>
</tr>
<tr>
<td>phone.number</td>
<td>Phone number, stripped of non numeric characters</td>
<td>string (intentionally left as string instead of number)</td>
<td></td>
</tr>
<tr>
<td><strong>externalIDs</strong></td>
<td>Array of objects containing ID values for 3rd party services. Objects follow standard key/value format but could have custom attributes added.</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td>external.:serviceid:</td>
<td>Contains string with ID for external service. Service is known by the key, standardization of 3rd party services will be available later.</td>
<td>object</td>
<td>skype:&quot;acafourek&quot;</td>
</tr>
<tr>
<td><strong>organizations</strong></td>
<td>Array of objects representing employment, volunteer or involvement history</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td>organization.name</td>
<td>Text name of company/organization</td>
<td>string</td>
<td>Alumni Spaces</td>
</tr>
<tr>
<td>organization.orgType</td>
<td>Category of affiliation with this organization.</td>
<td>string</td>
<td>Governmental</td>
</tr>
<tr>
<td>organization.startDate</td>
<td>ISO 8601 date of beginning of affiliation</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>organization.endDate</td>
<td>ISO 8601 date of end of affiliation</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>organization.title</td>
<td>Applicable title to describe this person&#39;s role in the organization</td>
<td>string</td>
<td>Chief Technical Officer</td>
</tr>
<tr>
<td>organization.prevTitles</td>
<td>Titles that have previously been assigned to the organization.title value</td>
<td>Array</td>
<td>Jr. Javascript Developer, Sr. Technical Manager, Director of Engineering</td>
</tr>
<tr>
<td>organization.linkedinID</td>
<td>LinkedIn ID of this organization</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><strong>urls</strong></td>
<td>Array of objects in the familiar label/value format</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td>url.label</td>
<td>Textual label for this url field</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>url.value</td>
<td>Valid url</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><strong>groups</strong></td>
<td>Alumni Spaces groups this person is affiliated with</td>
<td>Object</td>
<td></td>
</tr>
<tr>
<td>groups.:groupid:</td>
<td>Key is Group ID in the Alumni Spaces system, Value is readable name</td>
<td>String</td>
<td>mizzou_34:&quot;New York Mizzou Alumns&quot;</td>
</tr>
<tr>
<td><strong>gender</strong></td>
<td>Person&#39;s identified gender</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><strong>birthday</strong></td>
<td>ISO 8601 Date of Person&#39;s birthday</td>
<td>String</td>
<td></td>
</tr>
<tr>
<td><strong>contentIDs</strong></td>
<td>Array of strings- if a Person creates a Transaction via Alumni.Fund, the contentID affiliated with that Alumni.Fund flow is saved here.</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td><strong>asSiteIDs</strong></td>
<td>Array of strings- if a Person creates a Transaction via Alumni.Fund, the recipient group&#39;s unique ID is added to this Array</td>
<td>Array</td>
<td></td>
</tr>
</tbody></table>
<h2 id='get-a-person'>Get a Person</h2>
<p>You can fetch the record of an individual by using a <code>GET</code> request accompanied by the Person&#39;s id number.</p>
<h3 id='http-request-for-person'>HTTP Request for Person</h3>
<p><code>GET https://vault.alumnispaces.com/person/{id}</code></p>
<h3 id='url-parameters-for-person'>URL Parameters for Person</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the Person to retrieve</td>
</tr>
</tbody></table>
<h2 id='get-all-people'>Get All People</h2>
<p>You can fetch a full list of all people by using a <code>GET</code> request to the <code>/person</code> endpoint.</p>
<h3 id='http-request-for-person-2'>HTTP Request for Person</h3>
<p><code>GET https://vault.alumnispaces.com/person/</code></p>
<h2 id='create-a-person'>Create a Person</h2>
<blockquote>
<p>Response when creating a Person</p>
</blockquote>
<pre class="highlight plaintext"><code>    {
      "_id": "5653b26dd75eafac08185b3e"
    }
</code></pre>
<p>Creating a person simply requires making a POST to the /person endpoint with JSON-formatted profile data. When successfully created, an ID is returned.</p>

<aside class="notice">
When POSTing, make sure you have set the `Content-Type` header to `application/json`
</aside>
<h1 id='transactions'>Transactions</h1>
<blockquote>
<p>Example Transaction Record</p>
</blockquote>
<pre class="highlight plaintext"><code>{
        "_id": "583dd1d6daaab713f8a7a4d8",
        "_created": "2016-11-29T19:07:02.905Z",
        "_updated": "2016-11-29T19:07:16.221Z",
        "_method_updated": "2016-11-29T19:07:02.905Z",
        "_contentID_updated": "2016-11-29T19:07:02.905Z",
        "_asSiteID_updated": "2016-11-29T19:07:02.905Z",
        "_status_updated": "2016-11-29T19:07:02.905Z",
        "_taxed_updated": "2016-11-29T19:07:02.905Z",
        "_currency_updated": "2016-11-29T19:07:02.905Z",
        "_value_updated": "2016-11-29T19:07:02.905Z",
        "value": 25,
        "currency": "USD",
        "transDate": "2016-11-29T19:07:02.000Z",
        "person": "583dd1d6dagbe323522",
        "taxed": true,
        "status": "settled",
        "asSiteID": "oklahoma_23",
        "contentID": "oklahoma_23_223",

        "method": "credit_card",
        "disbursement" : {
            "complete" : true
        },
        "__v": 0,
        "note": [
            "Notes go in this space!"
        ],
        "items": [
            {
                "_updated": "2016-11-29T19:07:02.905Z",
                "label": "Lifetime Membership",
                "price": 25,
                "_id": "583dd1d6daaab713f8a7a4da"
            }
        ],
        "receipt": {
            "to": "tlannister@meereen.govv",
            "emailID": "log_66c55cd19as38276a60afde4119b2fd34c-3",
            "emailService": "Sendwithus",
            "sent": true,
            "_updated": "2016-11-29T19:07:16.221Z"
        },
        "external": [
            {
                "_updated": "2016-11-29T19:07:02.905Z",
                "key": "braintree",
                "value": "hdrqf3zg",
                "_id": "583dd1daggwqq13f8a2512d9"
            }
        ],
        "extra_fields": [
            {
                "value": "2007",
                "label": "Year of graduation",
                "field_type": "text",
                "id": "year_of_graduation",
                "_updated": "2017-08-10T16:08:39.574Z",
                "_id": "598c85071d18fa6948f21afa"
            },
            {
                "value": "english",
                "label": "Major",
                "field_type": "text",
                "id": "major",
                "_updated": "2017-08-10T16:08:39.574Z",
                "_id": "598c85071d18fa6948f21af9"
            },
            {
                "value": "1234556",
                "label": "Member ID",
                "field_type": "text",
                "id": "member_id",
                "_updated": "2017-08-10T16:08:39.574Z",
                "_id": "598c85071d18fa6948f21af8"
            }
        ]
    }
</code></pre>
<p>A <code>transaction</code> is a base object in the Alumni.Fund Vault API which describes a financial exchange within a 3rd party system.</p>

<p><img src="https://files.readme.io/BFROEvGKSOm3iABjxNfg_transaction.jpg" alt="Buying stuff" /></p>
<h3 id='what-a-transaction-is-not'>What a transaction is not</h3>
<p>Note that this object and its associated methods are for logging and recording, there are no methods to support the actual completion of a financial transaction.  POST actions add <code>Transaction</code> records, they do not initiate actual Transactions.</p>

<p>Transactions have the following attributes (<strong>bold</strong> indicates top level object element)</p>

<table><thead>
<tr>
<th>Response Parameter</th>
<th>Definition</th>
<th>Type</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td><strong>_id</strong></td>
<td>Unique identifier for this transaction</td>
<td>string</td>
<td>&quot;1234ABCD&quot;</td>
</tr>
<tr>
<td><strong>_created</strong></td>
<td>Date this Transaction&#39;s record was first created</td>
<td>string as ISO8601 Date</td>
<td></td>
</tr>
<tr>
<td><strong>_updated</strong></td>
<td>Date this Transaction&#39;s record was last updated</td>
<td>string as ISO8601 Date</td>
<td></td>
</tr>
<tr>
<td><strong>type</strong></td>
<td>Classification of what kind of transaction this is</td>
<td>string</td>
<td>Donation, Purchase, Ticket</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td>Currency value of the transaction. Only valid characters are numbers and decimal</td>
<td>number</td>
<td>10.00</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>ISO 4217 currency code</td>
<td>string</td>
<td>USD,GBP</td>
</tr>
<tr>
<td><strong>method</strong></td>
<td>Payment method used</td>
<td>string</td>
<td>credit_card, Venmo, Check</td>
</tr>
<tr>
<td><strong>physical</strong></td>
<td>Was transaction completed in-person?</td>
<td>boolean</td>
<td>true/false</td>
</tr>
<tr>
<td><strong>transDate</strong></td>
<td>ISO 8601 date of transaction timestamp</td>
<td>string</td>
<td>2015-07-05T22:16:18+00:00</td>
</tr>
<tr>
<td><strong>person</strong></td>
<td>Unique ID of person created by or mapped to this transaction (see <a href="#get-a-person">/people/:id method</a>)</td>
<td>string</td>
<td>1234</td>
</tr>
<tr>
<td><strong>taxed</strong></td>
<td>Was tax charged on this transaction?</td>
<td>boolean</td>
<td>true/false</td>
</tr>
<tr>
<td><strong>external</strong></td>
<td>Object containing external data objects affiliated with this transaction, allowing us to map data between transaction systems</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td><strong>disbursement</strong></td>
<td>Object containing data about payout of the funds associated with this transaction</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>disbursement.complete</td>
<td>Indicator for whether funds from this transaction have been paid out to client by Alumni Spaces.</td>
<td>boolean</td>
<td>true/false</td>
</tr>
<tr>
<td><strong>receipt</strong></td>
<td>Object containing information about customer notification</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>receipt.sent</td>
<td>Boolean indicator for receipt sent status</td>
<td>boolean</td>
<td>true/false</td>
</tr>
<tr>
<td>receipt.emailID</td>
<td>External mail service ID of receipt email. Mandrill ID, etc</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>receipt.to</td>
<td>Email address where receipt is to be sent</td>
<td>string</td>
<td>tester@gmail.com</td>
</tr>
<tr>
<td>receipt.service</td>
<td>Provider used to deliver receipt</td>
<td>string</td>
<td>Sendwithus</td>
</tr>
<tr>
<td><strong>source</strong></td>
<td>Object containing some basic info about how this transaction was obtained</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>source.channel</td>
<td>Medium through which customer was obtained</td>
<td>string</td>
<td>Facebook, email, event</td>
</tr>
<tr>
<td>source.interface</td>
<td>Tool the customer interfaced with to process payment</td>
<td>string</td>
<td>web, checkin, email</td>
</tr>
<tr>
<td>source.campaign</td>
<td>Campaign code used in channel</td>
<td>string</td>
<td>October_Watch_Party_email3</td>
</tr>
<tr>
<td>source.id</td>
<td>ID code used in campaign</td>
<td>string</td>
<td>12345</td>
</tr>
<tr>
<td><strong>contentID</strong></td>
<td>Alumni Spaces Content ID affiliated with this transaction</td>
<td>string</td>
<td>testnetwork_93_18</td>
</tr>
<tr>
<td><strong>asSiteID</strong></td>
<td>Alumni Spaces Group ID affiliated with this transaction</td>
<td>string</td>
<td>testnetwork_93</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>Some payment methods are not completed right away and a transaction is not considered funded and complete until status = settled</td>
<td>string</td>
<td>pending/failed/settled/refunded</td>
</tr>
<tr>
<td><strong>note</strong></td>
<td>Array field of text notes that may be affiliated with transaction</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>Array of objects describing what &quot;product&quot; was purchased in this flow. Alumni.Fund will show $5,$10,$20, etc by default but this may be customized by group or network.</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td>item.label</td>
<td>Group or network-provided text label for the product purchased.  If not present, there were no custom products defined and the Person selected an Alumni.Fund default of $5, $10, $20, etc. (as described in the <code>value</code> property)</td>
<td>String</td>
<td>Membership</td>
</tr>
<tr>
<td>item.price</td>
<td>If custom product was purchased, it&#39;s sale price is saved here. Should be the same as the <code>value</code> property</td>
<td>Number</td>
<td>85</td>
</tr>
<tr>
<td><strong>extra_fields</strong></td>
<td>Array of objects describing additional fields added to the Alumni.Fund flow by the group or network. This is currently limited to 3 fields.</td>
<td>Array</td>
<td></td>
</tr>
<tr>
<td>extra_field.id</td>
<td>Programmatically-created &quot;unique&quot; identifier for this field. Simple strip/replace of the <code>item.label</code> to remove non-alphanumerics and replace spaces with underscores. Note: this will not have an underscore prefix. There is likely to be an auto-generated <code>_id</code> in this object as well</td>
<td>String</td>
<td>year_of_graduation</td>
</tr>
<tr>
<td>extra_field.label</td>
<td>Group or network-provided label for this field</td>
<td>String</td>
<td>Year of Graduation</td>
</tr>
<tr>
<td>extra_field.field_type</td>
<td>Field type. Currently, extra fields may be <code>checkbox</code>, <code>dropdown</code> or <code>text</code></td>
<td>String</td>
<td>&quot;text&quot;</td>
</tr>
<tr>
<td>extra_field.value</td>
<td>Person-supplied value for this field.</td>
<td>String</td>
<td>&quot;Summer 2007&quot;</td>
</tr>
</tbody></table>
<h2 id='get-a-transaction'>Get a Transaction</h2>
<p>You can fetch the record of a transaction by using a <code>GET</code> request accompanied by the transaction ID number.</p>

<blockquote>
<p>Fetch transaction ID <code>58d7d9187200bc2fbbff77f1</code></p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://vault.alumnispaces.com/transaction/58d7d9187200bc2fbbff77f1
</code></pre><h3 id='http-request-for-transaction'>HTTP Request for Transaction</h3>
<p><code>GET https://vault.alumnispaces.com/transaction/{id}</code></p>
<h3 id='url-parameters-for-transaction'>URL Parameters for Transaction</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the Transaction to retrieve</td>
</tr>
</tbody></table>
<h2 id='create-a-transaction'>Create a Transaction</h2>
<blockquote>
<p>Response when creating a Transaction</p>
</blockquote>
<pre class="highlight plaintext"><code>    {
      "_id": "58d7d9187200bc2fbbff77f1"
    }
</code></pre>
<p>Creating a transaction simply requires making a POST to the /transaction endpoint with JSON-ready data passed as parameters. When successfully created, a <code>Transaction</code> ID is returned.</p>
<h2 id='update-a-transaction'>Update a Transaction</h2>
<p>Updating a transaction simply requires making a PUT request to the /transaction endpoint with JSON-ready data passed as parameters. When successfully updated, the full, updated <code>Transaction</code> record is returned.</p>

<aside class="notice">
When POSTing or PUTing, make sure you have set the `Content-Type` header to `application/json`
</aside>
<h2 id='querying-transactions'>Querying Transactions</h2>
<blockquote>
<p>Example request combining Order and Grouping parameters (records truncated for readability)</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://vault.alumnispaces.com/transaction/query?order=DESC&amp;order_by=value&amp;group_by=asSiteID
</code></pre><pre class="highlight plaintext"><code>{
  "bigstate_19": [
      {
        "_id": "596453247e9213434132811",
        "_created": "2017-07-11T02:26:15.715Z",
        "value": 900
      },
      {
        "_id": "593252247e92233434132231",
        "_created": "2017-07-11T14:55:09.769Z",
        "value": 800
      },
      {
        "_id": "131252247e9223343098021",
        "_created": "2016-06-12T14:12:08.121Z",
        "value": 500
      },
  ],
  "bigstate_37": [
      {
        "_id": "324237e92134341332523",
        "_created": "2013-09-04T02:26:15.715Z",
        "value": 100
      },
      {
        "_id": "080252247e9223343877",
        "_created": "2015-11-25T14:55:09.769Z",
        "value": 75
      },
      {
        "_id": "566247e92233430780082",
        "_created": "2016-06-12T14:12:08.121Z",
        "value": 50
      },
  ],
}
</code></pre>
<p>The Vault supports a number of query parameters that can make it easier to fetch and handle data in meaningful ways. All queries are a part of the <code>/transaction/query/</code> endpoint and depend on additional query parameters.</p>
<h3 id='return-grouping-and-ordering'>Return Grouping and Ordering</h3>
<p>You may request that the <code>Transaction</code> records be returned in specific groups, orders or ask us to do some math before sending it back to you.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td><code>order</code></td>
<td>Change the order of the returned data. Must be used with <code>order_by</code></td>
<td><code>ASC</code> (default), <code>DESC</code></td>
</tr>
<tr>
<td><code>order_by</code></td>
<td>The field that <code>order</code> should be based upon. Will work with any first-level field based on alphabetic or numerical order. (Date fields will inherently work in alpha/numeric ordering since they are in ISO format)</td>
<td><code>value</code>, <code>transDate</code>, <code>_updated</code></td>
</tr>
<tr>
<td><code>group_by</code></td>
<td>Group records based on a shared property value. The <code>group_by</code> value will become the parent to the transaction records contain within it (see example JSON)  Supports <code>person</code>, <code>status</code>, <code>taxed</code>, <code>contentID</code>,or <code>asSiteID</code></td>
<td><code>asSiteID</code> will return records within parent objects such as <code>littlestate_39</code> and <code>oklahoma_123</code></td>
</tr>
</tbody></table>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /></p>
<h3 id='return-aggregate-math'>Return Aggregate Math</h3>
<blockquote>
<p>Example of aggregation math</p>
</blockquote>
<pre class="highlight plaintext"><code>This request says to aggregate by asSiteID and return the sum of the "value" fields within those asSiteIDs
GET https://vault.alumnispaces.com/transaction/query?aggregate_by=asSiteID&amp;aggregate_sum=value
</code></pre><pre class="highlight plaintext"><code>[
    {
        "_id": "bigstate_39",
        "_count": 6,
        "value_sum": 185
    },
    {
        "_id": "bigstate_38",
        "_count": 1,
        "value_sum": 20
    },
    {
        "_id": "bigstate_21",
        "_count": 6,
        "value_sum": 120
    },
    {
        "_id": "bigstate_18",
        "_count": 1,
        "value_sum": 10
    }
]
</code></pre>
<p>You may also want to quickly determine &quot;What is the total value of all transactions per group?&quot; or &quot;What is the most recent transaction date?&quot;. To help with this, Vault provides aggregate math parameters.</p>

<p>Aggregation parameters work with <code>order</code> and <code>order_by</code> query parameters but will not work when combined with <a href="#return-filtering">Return Filtering</a> parameters.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td><code>aggregate_by</code></td>
<td>Requesting aggregate data will not return any <code>Transaction</code> records. Instead, you&#39;ll get grouped math summaries of the data within those records. This parameter is very similar to <code>group_by</code>  and accepts the same options as <code>group_by</code>. Requires <code>aggregate_{method}</code> parameter.</td>
<td>(See code example)</td>
</tr>
<tr>
<td><code>aggregate_{method}</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>This parameter uses both the key and value to determine your request. {method} may be <code>sum</code>, <code>avg</code>, <code>min</code> or <code>max</code> while the parameter&#39;s value should be a <code>Transaction</code> property.</td>
<td><code>aggregate_sum=value</code>, <code>aggregate_min=transDate</code></td>
</tr>
</tbody></table>
<h3 id='aggregation-request-examples'>Aggregation Request Examples</h3>
<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>When was the most recent transaction for each group?</td>
<td><code>/transaction/query?aggregate_by=asSiteID&amp;aggregate_max=transDate</code></td>
</tr>
<tr>
<td>What is the average payment value for a particular event?</td>
<td><code>/transaction/query?aggregate_by=contentID&amp;aggregate_avg=value</code></td>
</tr>
<tr>
<td>What is the average payment value for a particular event?</td>
<td><code>/transaction/query?aggregate_by=contentID&amp;aggregate_avg=value</code></td>
</tr>
<tr>
<td>What is the total value of all transactions still pending settlement?</td>
<td><code>/transaction/query?aggregate_by=status&amp;aggregate_sum=value</code></td>
</tr>
</tbody></table>

<p><br />
<br />
<br />
<br />
<br /></p>
<h3 id='return-filtering'>Return Filtering</h3>
<p>You may also request records based on field value or transaction data (<code>transDate</code>).  Returned data will be in the same format as expected from a vanilla <code>/transaction</code> or <code>group_by</code> request.</p>

<p>These filter options may be combined with <code>order</code>, <code>order_by</code> and <code>group_by</code> parameters to customize return format.</p>
<h3 id='date-ranges'>Date Ranges</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td><code>transDate_start</code></td>
<td>Only return transactions that occurred after this date. Format YYY-MM-DD.</td>
<td><code>transDate_start=2017-06-01</code></td>
</tr>
<tr>
<td><code>transDate_end</code></td>
<td>Only return transactions that occurred before this date. Format YYY-MM-DD.</td>
<td><code>transDate_end=2017-08-10</code></td>
</tr>
</tbody></table>

<p>You may use <code>transDate_start</code> and <code>transDate_end</code> to create a range. Ranges are only inclusive of the start date: requesting June 1 - August 10 means you&#39;re asking for data from 12:01AM on June 1 through 11:59PM on August 9.</p>
<h3 id='field-filter'>Field Filter</h3>
<p>You may also add a parameter to limit by any field value by simply using <code>{field}: {value}</code></p>

<p>Examples:</p>

<table><thead>
<tr>
<th></th>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Get all transactions for specific group</td>
<td><code>/transaction/query?contentID=bigstate_38_268</code></td>
</tr>
<tr>
<td>Get all transactions where <code>disbursement.complete</code> is true. Also demonstrates targeting nested fields in queries</td>
<td><code>/transaction/query?disbursement.complete=true</code></td>
</tr>
<tr>
<td>Get all transactions for specific <code>Person</code> ID</td>
<td><code>/transaction/query?person=58e7f3252192134341749143347c3</code></td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
